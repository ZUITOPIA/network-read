### Chap9. IPv6에 대해 배워보자

### 01. IPv6의 개요

### 01-1. IPv4 공인 IP의 고갈

인터넷에 접속하기 위해서는 공인 IP가 필요한데, 인터넷 보급에 따라 고갈되어감

```
공인 IP 고갈의 영향
- 새롭게 인터넷에 연결하려는 경우, 원하는 수만큼의 공인 IP를 할당받을 수 없거나, 사설 IP가 할당되기도 함 (사설 IP를 할당받으면 애플리케이션 이용에 제한이 걸릴 수 있음)

공인 IP 고갈에 대한 대책
- 지금 있는 주소를 효율적이게 사용하자
(1) 이미 존재하는 공인 IP 주소의 이용 효율을 높인다.
(2) NAT를 이용한다. (여러 기기가 공인 IP 하나를 돌려 쓰는 방법)
- 주소의 양 자체를 늘리자
(3) IPv6를 이용한다.

```

### 01-2. IPv6의 특징

IPv6의 역할
=> IPv4와 같이 애플리케이션 데이터를 어떤 PC로부터 다른 PC나 서버로 전달함 ( = 데이터를 넣기 위한 상자) + IPv4와는 다른 확장 기능 (암호화, 이동성, 주소 관리의 편리성)

### 02. IPv6 주소

### 02-1. IPv6 주소 표기

IPv6 주소의 크기 : 128비트 ( IPv4 주소와 같이 10진수로 표현하면 매우 길어짐 )

```
IPv6 주소 표기 방법
=> 16비트씩 16진수로 변환한 것을 '하나의 블록'으로 하여 각각의 블록을 :(콜론)으로 나누어 표기

(1) 각 블록 맨 앞의 연속된 0은 생략 가능
(2) '0000'은 '0'으로 생략 가능
(3) 연속된 '0000'(='0') 블록은 1번에 한해 ::으로 생략 가능
```

> 예시  
> 2001:5000:0ab0:0000:0000:1234:5678:0000  
> => 2001:5000:ab0:0:0:1234:5678:0  
> => 2001:5000:ab0::1234:5678:0

### 02-2. IPv6 주소의 종류

(1) 유니캐스트 주소

-   특정 인터페이스에 설정하기 위한 IPv6 주소 (1대1 통신에서 사용)
    (2) 멀티캐스트 주소
-   특정 멀티캐스트 그룹에 데이터를 송신할 때 목적지 주소로 사용
    (3) 애니캐스트 주소
-   애니캐스트 : 네트워크에서 가장 가까운 상대
-   송신지에서 가장 가까운 목적지로 통신하는 것

### 02-3. 주소 스코프

유니캐스트 주소, 브로드캐스트 주소, 애니캐스트 주소와 같은 경우 -> 유효범위를 가리키는 '스코프'라는 개념이 존재함

```
IPv6 주소의 스코프 중 주된 3가지
(1) 링크 로컬 스코프
- 특정 링크(=브로드캐스트 도메인 =서브넷)에서만 유효함
(2) 사이트 로컬 스코프
- 기업 네트워크 등 특정 조직(사이트) 내에서만 유효함
(3) 글로벌 스코프
- 유효범위에 제한 없음
```

### 02-4. IPv6 유니캐스트 주소의 구조

프리픽스(64비트) + 인터페이스 ID(64비트)

### 02-5. 유니캐스트 IPv6 주소의 분류

(1) 글로벌 유니캐스트 주소

-   스코프의 제한이 없고 전역적으로 유효한 유니캐스트 주소

(2) 사이트 로컬 유니캐스트 주소

-   같은 사이트 내에서만 유효한 유니캐스트 주소(이미 폐지됨)

(3) 유니크 로컬 유니캐스트 주소

-   사이트 로컬 유니캐스트 주소를 대체하여 동일 사이트 내부에서 이용되는 유니캐스트 주소

(4) 링크 로컬 유니캐스트 주소

-   같은 링크(서브넷) 상에서만 유효한 유니캐스트 주소
-   주로 같은 링크 상에 존재하는 다른 호스트의 주소 변환이나 라우팅 프로토콜 등의 제어정보를 주고받기 위해 사용됨

### 02-6. 인터페이스 ID

IPv6 유니캐스트 주소 = 프리픽스(64비트) + 인터페이스 ID(64비트)

프리픽스는 IPv4에서의 네트워크 ID / 인터페이스 ID는 IPv4에서의 호스트 ID
=> 인터페이스 ID로 네트워크 상의 호스트를 식별함

```
인터페이스 ID 결정방법 3가지
1. 수동
2. 자동 (EUI-64)
3. 자동 (익명 주소)
```

### 02-7. IPv6 패킷 전송

IPv6 패킷 전송 시 스위치와 라우터의 동작

스위치 : IPv6 지원 제품이 아니어도 됨
라우터 : IPv6 지원 제품이어야 함

### 03. IPv4 -> IPv6 전환 기술

```
IPv4 네트워크와 IPv6 네트워크의 혼재 환경에서 IPv6 통신을 수행하기 위한 방법 3가지
1. 듀얼 스택
-> 복수의 프로토콜 스택을 지원하는 것
(듀얼 스택을 지원하는 호스트나 라우터라면 IPv4 패킷과 IPv6 패킷을 모두 처리할 수 있음)
(IPv4인지 IPv6인지는 데이터 링크 계층의 헤더로 식별함)

2. 터널링
-> IPv4 네트워크를 사이에 두고 IPv6 네트워크끼리 통신을 하고 싶은 경우에 사용하는 기술
(터널링을 사용하면 IPv4 네트워크를 통해 IPv6 패킷을 전송할 때, 경계에 있는 라우터에서 전송용 IPv4 헤더가 추가됨 > 전송용 IPv4 헤더가 추가된 IPv6 패킷이 목적지의 경계에 있는 라우터에 도착하면 IPv4 헤더를 제거하고 IPv6 패킷을 전송함)
-> IPv4와 IPv6의 혼재 환경에만 국한되지 않고 자주 이용되는 기술
터널링 : 특정 프로토콜의 패킷을 다른 프로토콜의 네트워크에 전송하는 기술을 통틀어 이야기 함

3. 프로토콜 변환
-> IPv4 헤더와 IPv6 헤더를 상호 변환함으로써 IPv4 네트워크와 IPv6 네트워크를 연결하기 위한 기능
```
